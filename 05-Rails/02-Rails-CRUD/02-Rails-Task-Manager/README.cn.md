## èƒŒæ™¯å’Œç›®æ ‡

æˆ‘ä»¬æ¥å¼€å‘ä¸€ä¸ªå…·æœ‰åŸºæœ¬å¢åˆ æŸ¥æ”¹åŠŸèƒ½çš„ä»»åŠ¡ç®¡ç†åº”ç”¨(To Do Manager)ï¼š

1. åšä¸ºç”¨æˆ·ï¼Œæˆ‘å¯ä»¥æµè§ˆæ‰€æœ‰çš„ä»»åŠ¡(tasks)
2. åšä¸ºç”¨æˆ·ï¼Œæˆ‘å¯ä»¥æŸ¥çœ‹ä¸€ä¸ªtaskçš„è¯¦ç»†ä¿¡æ¯
3. åšä¸ºç”¨æˆ·ï¼Œæˆ‘å¯ä»¥æ·»åŠ ä¸€ä¸ªæ–°çš„task
4. åšä¸ºç”¨æˆ·ï¼Œæˆ‘å¯ä»¥ç¼–è¾‘ä¸€ä¸ªtaskï¼ˆæ ‡è®°ä¸ºå·²å®Œæˆ / æ›´æ–°æ ‡é¢˜å’Œè¯¦ç»†ä¿¡æ¯ç­‰ï¼‰
5. åšä¸ºç”¨æˆ·ï¼Œæˆ‘å¯ä»¥åˆ é™¤ä¸€ä¸ªtask

åœ¨è¿™ä¸ªç»ƒä¹ ï¼Œä½ ä¼šå†ä¸€æ¬¡è§åˆ°è€æœ‹å‹[**Active Record**](http://guides.rubyonrails.org/active_record_basics.html)ï¼Œå®ƒæ˜¯Railsçš„å¯¹è±¡å…³ç³»æ˜ å°„(ORM)ã€‚

ç°åœ¨æ²¡æœ‰`rake`äº†ï¼Œæ‰€ä»¥ä¸è¦åœ¨`fullstack-challenges`é‡Œé¢åˆ›å»ºä½ çš„Railsåº”ç”¨â›”ã€‚è¯·éµå®ˆä»¥ä¸‹æ­¥éª¤ï¼š

```bash
cd ~/code/<user.github_nickname>
rails new rails-task-manager --skip-active-storage --skip-action-mailbox
cd rails-task-manager
git add .
git commit -m "rails new"
gh repo create --public --source=.
git push origin master
```

## è¯¦ç»†è¯´æ˜

### 1 - æ¨¡å‹Model

ä½¿ç”¨æ­£ç¡®çš„railsç”Ÿæˆå™¨æ¥ç”Ÿæˆ`Task`æ¨¡å‹ã€‚`Task`æ¨¡å‹è‡³å°‘åº”è¯¥æœ‰ä»¥ä¸‹å­—æ®µï¼š
- `title`, æ•°æ®ç±»å‹æ˜¯å­—ç¬¦ä¸²`string`
- `details`, æ•°æ®ç±»å‹æ˜¯æ–‡æœ¬ `text`
- `completed`, æ•°æ®ç±»å‹æ˜¯å¸ƒå°”å€¼`boolean` (é»˜è®¤å€¼: `false`)

### 2 - æ§åˆ¶å™¨Controller

ä½¿ç”¨æ­£ç¡®çš„railsç”Ÿæˆå™¨æ¥ç”Ÿæˆä¸€ä¸ªç©ºçš„ï¼ˆæ²¡æœ‰ä»»ä½•åŠ¨ä½œçš„ï¼‰`TasksController`æ§åˆ¶å™¨ã€‚

åœ¨è¿™ä¸ªç»ƒä¹ é‡Œï¼Œ **ä¸è¦åœ¨ `config/routes.rb`æ–‡ä»¶é‡Œä½¿ç”¨`resources`**ã€‚è¿™ä¸ªç»ƒä¹ çš„ç›®æ ‡æ˜¯ä»é›¶å¼€å§‹é‡æ–°å¼€å‘åŸºæœ¬çš„å¢åˆ æŸ¥æ”¹CRUDåŠŸèƒ½ã€‚

### 3 - åšä¸ºç”¨æˆ·ï¼Œæˆ‘å¯ä»¥æŸ¥çœ‹æ‰€æœ‰çš„ä»»åŠ¡

é¦–å…ˆï¼Œæ·»åŠ ä¸€ä¸ªæ–°è·¯ç”±æ¥æ˜¾ç¤ºæ‰€æœ‰çš„ä»»åŠ¡ï¼Œè®°å¾—éµå®ˆè¯¾ä»¶é‡Œçš„railsçº¦å®šã€‚ç„¶åæ·»åŠ ä¸€ä¸ªæ§åˆ¶å™¨åŠ¨ä½œå’Œå¯¹åº”çš„è§†å›¾ã€‚è¿™ä¸ªåŠ¨ä½œåº”è¯¥è¯»å–**æ‰€æœ‰çš„**ä»»åŠ¡ï¼Œè§†å›¾åº”è¯¥å¾ªç¯éå†å¹¶æ˜¾ç¤ºè¿™äº›ä»»åŠ¡ï¼Œå°±åƒä¸‹é¢çš„æˆªå›¾é‚£æ ·ã€‚

ä½ çš„æ•°æ®åº“éœ€è¦æœ‰ä¸€äº›tasksç”¨æ¥æµ‹è¯•ä½ çš„è§†å›¾ï¼æ–°å¼€ä¸€ä¸ªç»ˆç«¯æ ‡ç­¾ï¼Œå¹¶è¿è¡Œ`rails console`ï¼Œç„¶åè¿è¡Œä»¥ä¸‹ä»£ç æ¥åˆ›å»ºä¸€äº›tasksï¼š

```ruby
Task.create title: 'æ´—è¡£æœ', details: 'ä¸è¦æŠŠä¸åŒé¢œè‰²è¡£æœçš„æ··æ´—!'
Task.create title: 'å­¦ä¹ ', details: 'æœ‰å¾ˆå¤šå¡ç‰‡è¦å­¦ä¹ ', completed: true
```

âš ï¸ ç°åœ¨å…ˆä¸è¦æ€¥ç€åœ¨è§†å›¾é‡Œå¼€å‘å¤é€‰æ¡†çš„å¤–è§‚è§†è§‰æ•ˆæœã€‚åœ¨é€‰åšç»ƒä¹ ä½ æœ‰æœºä¼šæ¥å¼€å‘çš„ã€‚

![](https://raw.githubusercontent.com/lewagon/fullstack-images/master/rails/tasks-manager/index.png)

### 4 - åšä¸ºç”¨æˆ·ï¼Œæˆ‘å¯ä»¥æŸ¥çœ‹ä¸€ä¸ªtaskçš„è¯¦ç»†ä¿¡æ¯

æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªä»»åŠ¡åˆ—è¡¨ï¼Œæˆ‘ä»¬æƒ³ç‚¹å‡»ä»»åŠ¡æ ‡é¢˜åè·³è½¬åˆ°ä¸€ä¸ªæ–°é¡µé¢ï¼Œæ˜¾ç¤ºäº†è¿™ä¸ªä»»åŠ¡çš„è¯¦ç»†ä¿¡æ¯ã€‚éµå®ˆè¯¾ä»¶é‡Œçš„railsçº¦å®šï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„è·¯ç”±ï¼Œæ§åˆ¶å™¨åŠ¨ä½œå’Œè§†å›¾ã€‚å¤šäºäº†æ¥è‡ªäºå‚æ•°`params`é‡Œçš„`id`ï¼Œè¿™ä¸ªåŠ¨ä½œåº”è¯¥**è¯»å–**ä¸€ä¸ªç‰¹å®šçš„ä»»åŠ¡ã€‚

ä½¿ç”¨`link_to`å¸®åŠ©æ–¹æ³•åˆ›å»ºé“¾æ¥å¹¶æ›´æ–°`index.html.erb`ã€‚

âš ï¸ å†ä¸€æ¬¡ï¼Œç°åœ¨å…ˆä¸è¦æ€¥ç€åœ¨è§†å›¾é‡Œå¼€å‘å¤é€‰æ¡†çš„å¤–è§‚è§†è§‰æ•ˆæœã€‚åœ¨é€‰åšç»ƒä¹ ä¸­ä½ ä¼šæœ‰æœºä¼šæ¥å¼€å‘çš„ã€‚

![](https://raw.githubusercontent.com/lewagon/fullstack-images/master/rails/tasks-manager/index_show.gif)

### 5 - åšä¸ºç”¨æˆ·ï¼Œæˆ‘å¯ä»¥æ·»åŠ ä¸€ä¸ªæ–°ä»»åŠ¡

éµå®ˆè¯¾ä»¶é‡Œçš„railsçº¦å®šï¼Œæ·»åŠ 2ä¸ªè·¯ç”±æ¥åˆ›å»ºä¸€ä¸ªæ–°ä»»åŠ¡ã€‚ä¸€ä¸ªè·¯ç”±ç”¨æ¥æ˜¾ç¤ºæ·»åŠ ä»»åŠ¡çš„è¡¨å•ï¼Œå¦å¤–ä¸€ä¸ªè·¯ç”±ç”¨æ¥å¤„ç†æäº¤è¡¨å•çš„æ—¶å€™äº§ç”Ÿçš„`POST`è¯·æ±‚ã€‚å°è¯•åœ¨è§†å›¾é‡Œç›´æ¥ä½¿ç”¨`form_with`å¸®åŠ©æ–¹æ³•ã€‚

![](https://raw.githubusercontent.com/lewagon/fullstack-images/master/rails/tasks-manager/new.gif)

### 6 - åšä¸ºç”¨æˆ·ï¼Œæˆ‘å¯ä»¥æ›´æ–°ä¸€ä¸ªä»»åŠ¡

æˆ‘ä»¬æƒ³è®©è¿™ä¸ªåº”ç”¨å¯ä»¥æ›´æ–°ä¸€ä¸ªä»»åŠ¡ï¼Œä¿®æ”¹ä»»åŠ¡æ ‡é¢˜ï¼Œè¯¦ç»†ä¿¡æ¯ï¼Œç‰¹åˆ«æ˜¯**æŠŠå®ƒæ ‡è®°ä¸ºå·²å®Œæˆ**ã€‚éµå®ˆè¯¾ä»¶é‡Œçš„railsçº¦å®šï¼Œæ·»åŠ 2ä¸ªè·¯ç”±æ¥å®Œæˆè¿™ä¸ªåŠŸèƒ½ã€‚å®ç°æ§åˆ¶å™¨åŠ¨ä½œå’Œè§†å›¾ã€‚

![](https://raw.githubusercontent.com/lewagon/fullstack-images/master/rails/tasks-manager/edit.gif)

### 7 - åšä¸ºç”¨æˆ·ï¼Œæˆ‘å¯ä»¥åˆ é™¤ä¸€ä¸ªä»»åŠ¡

æœ€åï¼Œæˆ‘ä»¬æƒ³è¦ä»ä»»åŠ¡åˆ—è¡¨é‡Œåˆ é™¤ä»»åŠ¡çš„åŠŸèƒ½ã€‚ä¸€ä¸ªJavaScriptéªŒè¯æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚

![](https://raw.githubusercontent.com/lewagon/fullstack-images/master/rails/tasks-manager/destroy.gif)

### 8 - é‡æ„ï¼ˆé€‰åšï¼‰

ä»”ç»†ç ”ç©¶ä½ çš„ä»£ç ï¼Œå¹¶ä¸”å¼•å…¥ä»¥ä¸‹é‡æ„ï¼š

1. åœ¨`config/routes.rb`ä½¿ç”¨`resources`
2. åœ¨`TasksController`ä½¿ç”¨`before_action`
3. æˆ‘ä»¬å¯ä»¥åœ¨`new` å’Œ `edit`è§†å›¾ä¸è¦é‡å¤è‡ªå·±`DRY`å—ï¼Ÿæˆ‘ä»¬å¦‚ä½•è®©æ–°å»ºä»»åŠ¡çš„è¡¨å•**ä¸è¦**æ˜¾ç¤ºå·²å®Œæˆï¼Ÿ([æç¤º](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-new_record-3F))

### 9 - å‰ç«¯ï¼ˆé€‰åšï¼‰

**å®‰è£…Bootstrapæ ·å¼**

è·Ÿç€[è¿™ä¸ªæ–‡æ¡£](https://getbootstrap.com/docs/5.1/getting-started/introduction/#css)æ¥å®‰è£…Bootstrapåœ¨ä½ çš„Railsåº”ç”¨ä¸Šã€‚ä½ å¯ä»¥å¤åˆ¶ç²˜è´´ä¸‹æ–¹ä»£ç åœ¨`application.html.erb`çš„`head`ä¸­æ·»åŠ ä¸€ä¸ª`link`æ ‡ç­¾ï¼š

```erb
<!-- app/views/layouts/application.html.erb -->
<!-- [...] -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
```

ä½ ç°åœ¨å¯ä»¥åœ¨ä½ Railsåº”ç”¨çš„å„ä¸ªé¡µé¢é‡Œä½¿ç”¨Bootstrap classå•¦ï¼ğŸ‰

**å®‰è£…Font Awesome**

åœ¨ä½ çš„layouté‡Œçš„`head`ä¸­æ·»åŠ ä¸‹æ–¹çš„`link`æ ‡ç­¾ï¼š

```erb
<!-- app/views/layouts/application.html.erb -->
<!-- [...] -->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.1.2/css/all.css">
```

ä½ ç°åœ¨å¯ä»¥éšæ„ä½¿ç”¨ä»»ä½•[å…è´¹çš„Font Awesomeå›¾æ ‡](https://fontawesome.com/search?m=free)å•¦ï¼ ğŸ‰å°è¯•æ‰¾æ‰¾ä¸€äº›å¥½çœ‹çš„é€‰é¡¹æ¡†å›¾æ ‡å§ï¼

ç„¶åï¼Œåœ¨ä½ çš„viewé‡Œï¼Œä½¿ç”¨æ¡ä»¶è¯­å¥ã€‚å¦‚æœè¯¥ä»»åŠ¡æ˜¯å·²å®ŒæˆçŠ¶æ€ï¼Œæ˜¾ç¤ºé€‰ä¸­çš„æ–¹å—ã€‚å¦‚æœæ˜¯æœªå®ŒæˆçŠ¶æ€ï¼Œåˆ™æ˜¾ç¤ºç©ºçš„æ–¹å—ã€‚

