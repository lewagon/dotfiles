## 介绍

好的面向对象设计取决于去理解一个对象有多少需要 **公开** 。

公开一个对象意味着使其属性（内部数据）对“公共”可用，即代表对程序中的其他对象，甚至其他程序公共可用。这些公共方法共同构成了对象的 **公共接口** 。私有的方法（只能在对象本身中访问）构成了它的 **私有接口** 。

一般来说，你只应该公开与其他对象交互所需的属性。**如果不需要任何公共接口，就不要设计任何公共可用的对象属性**

## 目标

- 创建具有公共接口的类
- 尝试使用 getters
- 编写自己的 `to_s` 方法
- 对方法使用默认参数
- 了解有关自定义异常的详细信息

尝试编写一个 `BankAccount` 类，它存储有关银行帐户的信息，并允许用户进行交易。

## 详细说明

### `bank_account.rb` 里的 `BankAccount` 类契约

类的公共接口，即所有公共方法的集合，称为类契约（ 参见 [DbC] 契约式设计的概念）(http://en.wikipedia.org/wiki/Design_by_contract) (需要VPN 🛡 ). 它是类对其他对象或其他Ruby程序所做的某种承诺。下面我们指定了我们的 `BankAccount` 类的契约。我们希望 **外部世界** 能够对银行账户对象 **执行以下操作**：

* 访问所有者的全名和余额
* 仅有权限查看 **部分** IBAN，例如IBAN: FR14**********606
* 以用户友好的方式打印部分帐户信息
* 取款或存款
* 如果提供了密码，则可打印交易记录

### `to_s` 方法


这个方法字面上代表 “to string”，用于向用户提供有关对象的信息。通过一个自定义的 `to_s` 方法，你可以定义任何你想要的行为，而且在Ruby中你会经常遇到这种情况。

我们可以把这种方法用于我们的银行账户上。一旦实施，它将如下所示：

```ruby
account = BankAccount.new("John Lennon", "FR14-2004-1010-0505-0001-3M02-606", 200, "yoko")

puts account
# 将调用对象上的 `to_s` 方法
# =>  Owner: John Lennon - IBAN: FR14**************606 - Balance: 200 euros
```

实现你的 `#to_s` 方法, 该方法还需要调用查看部分IBAN的方法。

### 取款或存款

实现 `#withdraw` 和 `#deposit`。 这两种方法都应该调用 private  `#add_transaction` 方法 (也在`#initialize`中调用)。 每个方法都应该返回一条消息，比如 “你刚刚提取/存入了XXX欧元” 。记住，取款其实只是负存款 😉

### 交易记录

现在你已实现一个`#transactions_history` 方法。此方法将密码哈希作为参数（例如`{ password: 'yoko' }`)，它是一个可选参数，如果未提供，则设置为空哈希值（这是表示 `args = {}`）。你的交易记录需要：

1. 如果给定了正确的密码，则返回一个显示交易的字符串。
2. 如果密码与帐户密码不符，则返回`"错误密码"`。
3. 如果调用方法时没有参数，则返回`"未提供密码"`。

## （可选）添加 `Transaction` 类

在每笔交易上增加日期的信息，来提高我们银行账户的能力怎么样？更改我们的交易记录方法，以便打印如下事务：

```bash
+ 200 euros on 22/10/13 at 8:30am
- 120 euros on 30/11/13 at 2:30pm
+ 1050 euros on 30/11/13 at 2:30pm
```

阅读关于 [单一功能原则](https://zh.wikipedia.org/wiki/%E5%8D%95%E4%B8%80%E5%8A%9F%E8%83%BD%E5%8E%9F%E5%88%99)， 现在问问自己：
-  `BankAccount` 类的主要功能是什么? 它的主要职责是打印基本账户信息，以及现金取款/存款，对吗？
- 银行账户的主要功能是跟踪每笔交易的日期还是精确地打印每笔交易？

此时，你可以将这些职责委托给另一个`Transaction` 类，该类将负责：
- 记录存款或取款的日期以及金额
- 以用户友好的方式打印此信息
- 你甚至可以考虑此类的其他数据，例如 `@message` 实例变量，用于存储每次取款/存款的引用字符串（“租车”、“ibiza周末”、“圣诞节购物”等）

在实现 `Transaction` 类之后，必须更改你的 `BankAccount` 类，以便其事务数组存储 `Transaction` 对象而不是数字。你还必须在 *account.rb* 加载 *transaction.rb* 文件

```ruby
require_relative "transaction"
```

## 学习要点

- 什么是类的公共接口？
- Getter 和 setter 有什么区别？
- `to_s` 方法这有什么用？
- 什么是默认参数？如何使用它们？
- 在 `bank_account.rb` 中2-3行和 19行发生了什么？

## 进一步建议和资源

- 你可以使用`Time#strftime`方法来改变`Transaction#to_s`中的日期的格式。
- Ruby有很多内置的异常（exception），但`DepositError`并不是。 我们可以创建自定义的异常来提供更好的错误信息， 这样可以帮助我们更方便地调试。读一读[这篇文章](https://launchschool.medium.com/getting-started-with-ruby-exceptions-d6318975b8d1) - 特别是关于 `Raising Custom Exceptions（提出自定义异常）` 的段落可以仔细看看。
